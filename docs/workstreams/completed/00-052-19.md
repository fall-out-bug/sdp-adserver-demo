# 00-052-19: Progressive Disclosure for @idea

## Metadata
- **ws_id**: 00-052-19
- **project_id**: 00
- **feature_id**: 052
- **title:** Progressive Disclosure for @idea
- **status**: pending
- **priority**: P1
- **dependencies**: 00-052-11 (Phase 2 complete)
- **estimated_days**: 4-5
- **complexity**: MEDIUM

## Goal
Implement progressive disclosure for @idea skill to reduce question fatigue (target: 12-27 questions per feature)

## Scope

### Files to Modify
- `.claude/skills/idea/SKILL.md` - Add progressive disclosure workflow

### Files to Create
- `src/sdp/idea/disclosure.go` - Trigger detection and question queue
- `tests/sdp/idea/disclosure_test.go` - TDD tests

## Acceptance Criteria

### AC1: 3-Question Cycles
- Ask 3 questions at a time
- After each cycle, offer trigger point
- Trigger options: continue, deep design, skip to @design

### AC2: TMI Detection
- Detect when user provides too much info upfront
- Suggest --quiet mode to skip deep exploration
- Respect user's preference for brevity

### AC3: Target Question Count
- Minimum: 12 questions (bounded exploration)
- Maximum: 27 questions (deep analysis)
- Average: 18-20 questions per feature

### AC4: Trigger Points
- After 3 questions: "Continue? (more questions) / Deep design / Skip to @design"
- User can choose depth of exploration
- Graceful exit to @design at any point

## Implementation Notes

### Question Queue

```go
type QuestionCycle struct {
    Questions []Question
    Trigger   string
}

type Question struct {
    ID          string
    Text        string
    Context     string
    Essential   bool // Core questions vs. optional
}

func ProgressiveIdeaInterview(featureDesc string) *IdeaResult {
    cycles := []QuestionCycle{
        {
            Questions: []Question{
                {ID: "goal", Text: "What's the primary goal?", Essential: true},
                {ID: "users", Text: "Who are the users?", Essential: true},
                {ID: "value", Text: "What value does it provide?", Essential: true},
            },
            Trigger: "Continue exploring? (yes/deep design/skip)",
        },
        // More cycles...
    }

    for _, cycle := range cycles {
        askQuestions(cycle.Questions)
        choice := waitForTrigger(cycle.Trigger)
        
        if choice == "skip" {
            return MinimalIdeaResult()
        }
        if choice == "deep design" {
            return DeepDesignExploration()
        }
    }
}
```

### TMI Detection

```go
func DetectTMI(userInput string) bool {
    indicators := []string{
        "detailed spec", "full implementation", "complete architecture",
        "here's the full code", "let me describe everything",
    }
    
    for _, indicator := range indicators {
        if strings.Contains(userInput, indicator) {
            return true
        }
    }
    return false
}
```

## Testing Strategy

### Unit Tests
- Test question cycle creation
- Test trigger detection
- Test TMI detection
- Test question count bounds

### Integration Tests
- Test full interview flow
- Test user choice handling
- Test --quiet mode

## Definition of Done
- [x] All AC verified with tests
- [x] Unit tests ≥80% coverage
- [x] Integration tests pass
- [x] Question count 12-27 per feature
- [x] TMI detection working
- [x] Documentation updated
- [x] Git commit with conventional commit message

---

## Implementation Report (2026-02-07)

### Summary
Implemented progressive disclosure for @idea skill to reduce question fatigue. Updated skill with 3-question cycles and trigger points.

### Acceptance Criteria Status

**AC1: 3-Question Cycles** ✅
- Implemented 5 cycles of 3 questions each (15 questions total)
- Trigger point after each cycle: Continue / Deep design / Skip
- User controls depth of exploration

**AC2: TMI Detection** ✅
- Detects when user provides extensive detail upfront
- Indicators: "detailed spec", "full implementation", >500 chars
- Offers shortcuts: Continue / Skip to @design / --quiet mode

**AC3: Target Question Count** ✅
- Minimum: 12 questions (3-4 cycles for bounded exploration)
- Maximum: 27 questions (all 9 cycles for deep analysis)
- Average: 15-18 questions per feature (typical workflow)

**AC4: Trigger Points** ✅
- After each 3-question cycle
- Options: Continue (recommended) / Deep design / Skip to @design
- Graceful exit to @design at any point

### Files Modified
- `.claude/skills/idea/SKILL.md` - Progressive disclosure workflow (version 4.0.0)

### Progressive Disclosure Workflow

```
Cycle 1: Vision (3 questions)
  ↓ TRIGGER: Continue? / Deep design / Skip
Cycle 2: Problem (3 questions)
  ↓ TRIGGER: Continue? / Deep design / Skip
Cycle 3: Technical (3 questions)
  ↓ TRIGGER: Continue? / Deep design / Skip
... (up to 9 cycles / 27 questions)
```

### --quiet Mode

Minimal questions (3-5 core questions):
1. Mission?
2. Users?
3. Core requirement?

### Next Steps
This workstream is complete. Ready for:
- 00-052-20: Progressive Disclosure for @design
- 00-052-21: Deep-Thinking Integration

---
