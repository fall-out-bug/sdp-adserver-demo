# E2E –¢–µ—Å—Ç—ã —Å Playwright

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UI –∏ API —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä–Ω—É—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)
npm install

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä—ã Playwright (–æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ)
npx playwright install

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker compose up -d

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ E2E —Ç–µ—Å—Ç—ã
npm run test:e2e

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª —Ç–µ—Å—Ç–æ–≤
npm run test:e2e -- simple.spec.ts
npm run test:e2e -- flow.spec.ts

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å UI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
npm run test:e2e:ui

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ headed —Ä–µ–∂–∏–º–µ (—Å –≤–∏–¥–∏–º—ã–º –±—Ä–∞—É–∑–µ—Ä–æ–º)
npm run test:e2e:headed

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ç—á–µ—Ç
npm run test:e2e:report
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
tests/e2e/
‚îú‚îÄ‚îÄ playwright/
‚îÇ   ‚îú‚îÄ‚îÄ simple.spec.ts       # –ë–∞–∑–æ–≤—ã–µ E2E —Ç–µ—Å—Ç—ã (7 —Ç–µ—Å—Ç–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ flow.spec.ts         # –ü–æ–ª–Ω—ã–π —Ñ–ª–æ—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–æ–∫–∞–∑–∞ (18 —Ç–µ—Å—Ç–æ–≤)
‚îÇ   ‚îî‚îÄ‚îÄ helpers.ts           # Helper —Ñ—É–Ω–∫—Ü–∏–∏
‚îî‚îÄ‚îÄ README.md
```

## üß™ –¢–µ—Å—Ç—ã

### simple.spec.ts - –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞:
- ‚úÖ API health check
- ‚úÖ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 6 demo slots
- ‚úÖ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç banner –¥–ª—è leaderboard slot
- ‚úÖ Frontend homepage –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚úÖ Frontend demo page –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚úÖ Demo page –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç banner —Å–µ–∫—Ü–∏–∏
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 7/7 passed (5.3s)

### flow.spec.ts - –ü–æ–ª–Ω—ã–π —Ñ–ª–æ—É
–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:

#### Publisher Registration & Authentication Flow
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –∏–∑–¥–∞—Ç–µ–ª—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (409 Conflict)
- –í—Ö–æ–¥ —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –û—Ç–∫–∞–∑ –ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (401 Unauthorized)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —Å —Ç–æ–∫–µ–Ω–æ–º

#### Advertiser Registration & Authentication Flow
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ —Ä–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—è
- –í—Ö–æ–¥ —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —Å —Ç–æ–∫–µ–Ω–æ–º

#### Demo Banner Management Flow
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–µ–º–æ-–±–∞–Ω–Ω–µ—Ä–∞
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –±–∞–Ω–Ω–µ—Ä–æ–≤
- –ó–∞—â–∏—Ç–∞ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (401 Unauthorized)

#### Ad Delivery & Tracking Flow
- –î–æ—Å—Ç–∞–≤–∫–∞ —Ä–µ–∫–ª–∞–º—ã –¥–ª—è —Å–ª–æ—Ç–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å–ª–æ—Ç–∞
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–∫–∞–∑–æ–≤ (impressions)
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–ª–∏–∫–æ–≤

#### Full End-to-End Flow
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è publisher ‚Üí Login
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è advertiser ‚Üí Login
- –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–Ω–Ω–µ—Ä–∞
- –î–æ—Å—Ç–∞–≤–∫–∞ —Ä–µ–∫–ª–∞–º—ã
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–∫–∞–∑–∞

#### UI Flow Tests
- Publisher Portal –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- Advertiser Portal –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 18/18 passed (3.4s)

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

`playwright.config.js`:
- **baseURL**: http://localhost:3000 (–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ BASE_URL)
- **API_BASE_URL**: http://localhost:8080 (–¥–ª—è API —Ç–µ—Å—Ç–æ–≤)
- **browser**: Chromium (headless –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **workers**: 3 (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ)

## üìä –ü–æ–∫—Ä—ã—Ç–∏–µ API

| Endpoint | –ú–µ—Ç–æ–¥ | –¢–µ—Å—Ç |
|----------|-------|------|
| `/health` | GET | ‚úÖ |
| `/api/v1/demo/slots` | GET | ‚úÖ |
| `/api/v1/demo/slots/:slot_id/banner` | GET | ‚úÖ |
| `/api/v1/publishers/register` | POST | ‚úÖ |
| `/api/v1/publishers/login` | POST | ‚úÖ |
| `/api/v1/publishers/me` | GET | ‚úÖ |
| `/api/v1/advertisers/register` | POST | ‚úÖ |
| `/api/v1/advertisers/login` | POST | ‚úÖ |
| `/api/v1/advertisers/me` | GET | ‚úÖ |
| `/api/v1/demo/banners` | POST | ‚úÖ |
| `/api/v1/demo/banners` | GET | ‚úÖ |
| `/api/v1/delivery/:slot_id` | GET | ‚úÖ |
| `/api/v1/track/impression` | POST | ‚úÖ |
| `/api/v1/track/click/:impression_id` | GET | ‚úÖ |

## üìä –û—Ç—á–µ—Ç—ã

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è HTML –æ—Ç—á–µ—Ç:
```bash
npx playwright show-report
```

–û—Ç—á–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `playwright-report/`.

## üî¨ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ CI

```bash
# –ó–∞–ø—É—Å–∫ —Å –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏–µ–π
CI=true npm run test:e2e

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç –¥–ª—è CI
CI=true npm run test:e2e:report
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç —Å –æ—Ç–ª–∞–¥–∫–æ–π
npx playwright test --debug

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º —Ä–µ–∂–∏–º–æ–º
npx playwright test --headed

# –ü–æ–∫–∞–∑–∞—Ç—å UI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
npx playwright test --ui
```
